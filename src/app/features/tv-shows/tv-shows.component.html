<div class="workspace-layout grid-system">
    <div class="workspace-main">
        <header class="ws-header">
            <div class="workspace-header-title">
                <h1>Popular TV Shows</h1>
            </div>

            <div class="ws-controls">
                <div class="filter-row-figma">
                    <app-figma-select [options]="genreOptions()" [value]="filters().genreId"
                        (valueChange)="updateFilter('genreId', $event)">
                    </app-figma-select>

                    <app-figma-select [options]="yearOptions()" [value]="filters().year"
                        (valueChange)="updateFilter('year', $event)">
                    </app-figma-select>

                    <app-figma-select [options]="ratingOptions" [value]="filters().minRating"
                        (valueChange)="updateFilter('minRating', $event)">
                    </app-figma-select>

                    <app-figma-select [options]="languageOptions()" [value]="filters().language"
                        (valueChange)="updateFilter('language', $event)">
                    </app-figma-select>

                    <app-figma-select [options]="sortOptions" [value]="filters().sortBy"
                        (valueChange)="updateFilter('sortBy', $event)">
                    </app-figma-select>
                </div>
            </div>
        </header>

        @if (isLoading()) {
        <div class="loading-state-minimal">
            <div class="spinner-minimal"></div>
            <p>Scanning Network...</p>
        </div>
        }

        @if (errorMessage()) {
        <div class="error-container-figma card-flat">
            <p>{{ errorMessage() }}</p>
        </div>
        }

        <div class="ws-grid-inner">
            @for (movie of movies(); track movie.id) {
            <app-movie-card [movie]="movie" type="tv"></app-movie-card>
            }
        </div>

        @if (movies().length > 0) {
        <div class="load-more-container">
            <button class="btn-figma btn-outline-figma load-more-btn" [disabled]="isLoadingMore()" (click)="loadMore()">
                @if (isLoadingMore()) {
                <div class="spinner-tiny"></div>
                CALIBRATING...
                } @else {
                LOAD MORE SERIES
                }
            </button>
        </div>
        }
    </div>
</div>